Backend:
1. Hệ thống nhận hàng tự động:
    - List hàng: các customer (agent) sẽ liên tiếp request các mặt hàng
    - Các mặt hàng tự động được depot nhận về và đưa vào một list để xử lý
    - Khi nào số hàng vượt mức nào đó, sẽ lấy số hàng dưới mức đó để đưa vào tính toán
    - Dưới danh nghĩa hàng nma vẫn chỉ implement khối lượng cho việc tính toán đơn giản

2. Hệ thống tính toán quãng đường mới: (chắc lùi qua test case 3, nên tập trung vào multiagent sys)
    - Thay vì chỉ có mỗi distance (khoảng cách toạ độ euclid), thì implement path cost

3. Hệ thống giao tiếp mới cho delivery và vehicle
    - Dùng FIPA-REQUEST cho Depot -> Delivery (đã áp dụng)
    - Dùng payload tối giản: Depot gửi `VEHICLES:name:cap,...`; Delivery trả `NAMES:...`
    - Với Delivery -> Vehicle: sẽ nâng cấp dần (định hướng CONTRACT-NET ở test case 3)

4. Phạm vi (Scope) của Test Case 2 (nâng cấp từ Test Case 1)
    - Tập trung vào hệ thống multi-agent + dây chuyền nhận hàng + tồn kho đơn giản
    - Chưa làm path cost/time window ở mức OR-Tools (để test case 3)
    - Chuẩn hoá giao tiếp Depot <-> Delivery theo FIPA-REQUEST + tối giản payload

6. Quy tắc xử lý đơn hàng ở Depot
    - Nhận request từ các Customer agent và đẩy vào queue
    - Cơ chế backpressure theo ngưỡng N (ví dụ N = 10 yêu cầu):
        - Khi queue >= N, chốt batch hiện tại để tính route
        - Lấy các yêu cầu trong batch, gom theo tọa độ khách + tổng khối lượng (qty ~ demand)
    - Kiểm tồn kho:
        - Nếu `inventory[item] >= qty` thì xác nhận phục vụ, trừ tồn và cộng vào demand của customer tương ứng
        - Nếu thiếu, đẩy phần thiếu vào Unserved, và chỉ lấy phần còn có thể phục vụ (hoặc bỏ qua toàn bộ nếu muốn đơn giản)

7. Định dạng dữ liệu đầu vào/đầu ra (tối giản)
    - Từ Customer -> Depot (giả lập nội bộ trong agent): `{customerId, x, y, requests: [{item, qty}]}`
    - Depot -> Delivery (FIPA-REQUEST): `VEHICLES:name:cap,name2:cap2`
    - Delivery -> Depot (INFORM): `NAMES:name1,name2,...` (trả danh sách xe đang rảnh)
    - Depot -> Delivery (INFORM routes, giữ nguyên JSON route cũ để UI dùng)
    - Delivery -> API: JSON final gồm `vehicle_state`, `available_vehicle_count`, `routes` như hiện tại

9. Tiêu chí chấp nhận (Acceptance Criteria)
    - Có cơ chế queue + ngưỡng batch N cho yêu cầu hàng
    - Kiểm tồn kho đơn giản: có thể phục vụ toàn bộ hoặc một phần; phần thiếu được ghi vào Unserved
    - Giao tiếp Depot <-> Delivery dùng FIPA-REQUEST + payload rút gọn như đã triển khai
    - Kết quả cuối vẫn hiển thị được routes ở frontend như Test Case 1
    - Log đầy đủ các sự kiện chính: nhận yêu cầu, batch chốt, kiểm kho, số xe rảnh, giải route, gửi API